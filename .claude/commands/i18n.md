---
description: Manage internationalization - add translations, new languages, debug i18n issues
allowed-tools: Read, Write, Edit, Glob, Grep, AskUserQuestion
---

# /i18n - Internationalization Management

## Goal

Manage the next-intl based i18n system: add translations, new languages, or debug localization issues.

## i18n System Overview

This project uses:
- **next-intl** for internationalization
- **Message files** in `frontend/messages/`
- **Supported locales**: English (en), Persian/Farsi (fa)

## Commands

### Add New Translation Keys

1. **Add to both language files:**

`messages/en.json`:
```json
{
  "section": {
    "newKey": "English text"
  }
}
```

`messages/fa.json`:
```json
{
  "section": {
    "newKey": "متن فارسی"
  }
}
```

2. **Use in components:**
```tsx
import { useTranslations } from 'next-intl';

function MyComponent() {
  const t = useTranslations('section');
  return <p>{t('newKey')}</p>;
}
```

### Add New Language

1. Create new message file: `messages/[locale].json`
2. Update `src/i18n/config.ts` to include new locale
3. Update `LanguageSelector.tsx` to show new option

### Debug i18n Issues

**Common issues:**

1. **Missing translation (shows key):**
   - Check key exists in both message files
   - Check namespace matches: `useTranslations('namespace')`

2. **Wrong language showing:**
   - Check locale detection in `src/i18n/request.ts`
   - Check cookie/localStorage for locale preference

3. **RTL not working (Persian):**
   - Add `dir="rtl"` to root element when locale is 'fa'
   - Check Tailwind RTL utilities

### i18n Files

```
messages/
  en.json                    # English translations
  fa.json                    # Persian translations
src/i18n/
  config.ts                  # Locale configuration
  request.ts                 # Server-side locale detection
src/components/
  LanguageSelector.tsx       # Language picker UI
```

### Translation Tips

- Keep keys semantic: `hero.title` not `text1`
- Group by page/section: `home.hero.title`, `art.gallery.title`
- Include pluralization when needed
- Persian text should be RTL-aware

## Request

$ARGUMENTS
